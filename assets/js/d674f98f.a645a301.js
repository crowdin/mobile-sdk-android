"use strict";(self.webpackChunk_crowdin_mobile_sdk_android_website=self.webpackChunk_crowdin_mobile_sdk_android_website||[]).push([[441],{5680:(e,t,n)=>{n.d(t,{xA:()=>p,yg:()=>m});var o=n(6540);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,o,i=function(e,t){if(null==e)return{};var n,o,i={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var l=o.createContext({}),d=function(e){var t=o.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},p=function(e){var t=d(e.components);return o.createElement(l.Provider,{value:t},e.children)},c="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},g=o.forwardRef((function(e,t){var n=e.components,i=e.mdxType,r=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),c=d(n),g=i,m=c["".concat(l,".").concat(g)]||c[g]||u[g]||r;return n?o.createElement(m,a(a({ref:t},p),{},{components:n})):o.createElement(m,a({ref:t},p))}));function m(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=n.length,a=new Array(r);a[0]=g;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[c]="string"==typeof e?e:i,a[1]=s;for(var d=2;d<r;d++)a[d]=n[d];return o.createElement.apply(null,a)}return o.createElement.apply(null,n)}g.displayName="MDXCreateElement"},1971:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>a,default:()=>u,frontMatter:()=>r,metadata:()=>s,toc:()=>d});var o=n(8168),i=(n(6540),n(5680));const r={},a="Screenshots Automation",s={unversionedId:"guides/screenshots-automation",id:"guides/screenshots-automation",title:"Screenshots Automation",description:"This guide shows how to automate the process of taking screenshots and uploading them to Crowdin to provide context for translators or AI. It covers the necessary setup, how to use the Crowdin SDK, and a sample automation test.",source:"@site/docs/guides/screenshots-automation.md",sourceDirName:"guides",slug:"/guides/screenshots-automation",permalink:"/mobile-sdk-android/guides/screenshots-automation",draft:!1,editUrl:"https://github.com/crowdin/mobile-sdk-android/tree/master/website/docs/guides/screenshots-automation.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"SDK Controls",permalink:"/mobile-sdk-android/advanced-features/sdk-controls"},next:{title:"Multiple Flavor Apps",permalink:"/mobile-sdk-android/guides/multiple-flavor-app"}},l={},d=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Setting Up the Crowdin SDK",id:"setting-up-the-crowdin-sdk",level:2},{value:"Key Configuration Options",id:"key-configuration-options",level:3},{value:"Capturing Screenshots with Crowdin SDK",id:"capturing-screenshots-with-crowdin-sdk",level:2},{value:"Example Automation Test",id:"example-automation-test",level:2},{value:"Key Points",id:"key-points",level:3},{value:"Conclusion",id:"conclusion",level:2}],p={toc:d},c="wrapper";function u(e){let{components:t,...n}=e;return(0,i.yg)(c,(0,o.A)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,i.yg)("h1",{id:"screenshots-automation"},"Screenshots Automation"),(0,i.yg)("p",null,"This guide shows how to automate the process of taking screenshots and uploading them to Crowdin to provide context for translators or AI. It covers the necessary setup, how to use the Crowdin SDK, and a sample automation test."),(0,i.yg)("h2",{id:"prerequisites"},"Prerequisites"),(0,i.yg)("p",null,"Before you start, ensure the following:"),(0,i.yg)("ol",null,(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},(0,i.yg)("strong",{parentName:"p"},"Crowdin SDK Integration:")," The Crowdin SDK should be integrated into your project (See ",(0,i.yg)("a",{parentName:"p",href:"#setting-up-the-crowdin-sdk"},"Setting Up the Crowdin SDK"),").")),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},(0,i.yg)("strong",{parentName:"p"},"Android Testing Dependencies:")," Add the following dependencies to your ",(0,i.yg)("inlineCode",{parentName:"p"},"build.gradle")," file:"),(0,i.yg)("pre",{parentName:"li"},(0,i.yg)("code",{parentName:"pre",className:"language-groovy",metastring:'title="build.gradle"',title:'"build.gradle"'},'dependencies {\n    androidTestImplementation "androidx.test.ext:junit:1.2.1"\n    androidTestImplementation "androidx.test.espresso:espresso-core:3.6.1"\n    androidTestImplementation "androidx.tracing:tracing:1.2.0"\n    androidTestImplementation "androidx.test.espresso:espresso-contrib:3.6.1"\n}\n')))),(0,i.yg)("h2",{id:"setting-up-the-crowdin-sdk"},"Setting Up the Crowdin SDK"),(0,i.yg)("p",null,"To use the Crowdin SDK for automation testing, configure it as follows:"),(0,i.yg)("ol",null,(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},(0,i.yg)("strong",{parentName:"p"},"Add the Crowdin SDK to Your Dependencies:")),(0,i.yg)("p",{parentName:"li"},"Add the necessary dependency to your ",(0,i.yg)("inlineCode",{parentName:"p"},"build.gradle")," file:"),(0,i.yg)("pre",{parentName:"li"},(0,i.yg)("code",{parentName:"pre",className:"language-groovy",metastring:'title="build.gradle"',title:'"build.gradle"'},"implementation 'com.github.crowdin.mobile-sdk-android:sdk:1.11.1'\n"))),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},(0,i.yg)("strong",{parentName:"p"},"Initialize the SDK:")),(0,i.yg)("p",{parentName:"li"},"Use the following code to initialize the Crowdin SDK, ensuring you include the ",(0,i.yg)("inlineCode",{parentName:"p"},"withApiAuthConfig")," configuration for automation:"),(0,i.yg)("pre",{parentName:"li"},(0,i.yg)("code",{parentName:"pre",className:"language-kotlin",metastring:'title="Application.kt"',title:'"Application.kt"'},'class MyApplication : Application() {\n    override fun onCreate() {\n        super.onCreate()\n\n        Crowdin.init(\n            this,\n            CrowdinConfig.Builder()\n                .withDistributionHash("your_distribution_hash_here")\n                .withScreenshotEnabled()\n                .withSourceLanguage("source_language_code")\n                .withApiAuthConfig(ApiAuthConfig("your_api_token_here"))\n                .build()\n        )\n    }\n}\n')))),(0,i.yg)("h3",{id:"key-configuration-options"},"Key Configuration Options"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("inlineCode",{parentName:"li"},"withApiAuthConfig(ApiAuthConfig)")," - Sets up API token-based authentication for automated workflows. This method is essential for CI/CD pipelines and scenarios where user interaction isn't required."),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("inlineCode",{parentName:"li"},"withDistributionHash(String)")," - Defines the unique distribution hash from your Crowdin project."),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("inlineCode",{parentName:"li"},"withScreenshotEnabled()")," - Activates the Screenshots feature in your application, enabling automatic capture and upload of tagged screenshots.")),(0,i.yg)("admonition",{type:"tip"},(0,i.yg)("p",{parentName:"admonition"},"See the ",(0,i.yg)("a",{parentName:"p",href:"/advanced-features/screenshots"},"Screenshots")," guide for more information on setting up the Crowdin SDK for screenshots.")),(0,i.yg)("h2",{id:"capturing-screenshots-with-crowdin-sdk"},"Capturing Screenshots with Crowdin SDK"),(0,i.yg)("p",null,"Screenshots can be automatically uploaded to Crowdin by calling the ",(0,i.yg)("inlineCode",{parentName:"p"},"Crowdin.sendScreenshot()")," method. This method requires a bitmap image, a screenshot name, and a ",(0,i.yg)("inlineCode",{parentName:"p"},"ScreenshotCallback")," (optional) to handle success or failure."),(0,i.yg)("h2",{id:"example-automation-test"},"Example Automation Test"),(0,i.yg)("p",null,"The following test navigates through app screens, captures screenshots, and uploads them to Crowdin:"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-kotlin"},'@Test\nfun screenshotCapture() {\n    val splashScenario = ActivityScenario.launch(SplashScreenActivity::class.java)\n\n    waitForActivity<MainActivity>()?.let { activity ->\n        captureAndSendScreenshot(activity, "dashboard")\n\n        onView(withId(R.id.drawerLayout)).perform(DrawerActions.open())\n        onView(withId(R.id.nav_add_task)).perform(click())\n        captureAndSendScreenshot(activity, "add_task")\n\n        onView(withId(R.id.drawerLayout)).perform(DrawerActions.open())\n        onView(withId(R.id.nav_category)).perform(click())\n        captureAndSendScreenshot(activity, "category")\n    } ?: throw IllegalStateException("MainActivity not found!")\n\n    splashScenario.close()\n}\n\nprivate fun captureAndSendScreenshot(activity: Activity, name: String) {\n    val latch = CountDownLatch(1)\n    val rootView = activity.window.decorView.rootView\n    val bitmap = captureBitmap(rootView)\n\n    Crowdin.sendScreenshot(\n        bitmap = bitmap,\n        screenshotName = name,\n        screenshotCallback = object : ScreenshotCallback {\n            override fun onSuccess() {\n                latch.countDown()\n            }\n            override fun onFailure(throwable: Throwable) {\n                throw AssertionError("Screenshot upload failed: ${throwable.message}")\n            }\n        }\n    )\n\n    latch.await(30, TimeUnit.SECONDS)\n}\n')),(0,i.yg)("h3",{id:"key-points"},"Key Points"),(0,i.yg)("ol",null,(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("strong",{parentName:"li"},"Bitmap Generation:")," Screenshots are captured by drawing the root view onto a Canvas."),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("strong",{parentName:"li"},"Crowdin SDK Integration:")," Use ",(0,i.yg)("inlineCode",{parentName:"li"},"Crowdin.sendScreenshot()")," to upload screenshots with metadata."),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("strong",{parentName:"li"},"Custom View Actions:")," Handle RecyclerView actions like editing or deleting items using custom ",(0,i.yg)("inlineCode",{parentName:"li"},"ViewAction"),".")),(0,i.yg)("h2",{id:"conclusion"},"Conclusion"),(0,i.yg)("p",null,"This guide demonstrates how to create automation tests that capture and upload screenshots using the Crowdin SDK. More details can be found in the ",(0,i.yg)("a",{parentName:"p",href:"https://github.com/crowdin/mobile-sdk-android/blob/master/example/src/androidTest/java/com/crowdin/platform/example/ScreenshotAutomationTest.kt"},(0,i.yg)("inlineCode",{parentName:"a"},"ScreenshotAutomationTest.kt"))," file of the Crowdin SDK Example project."),(0,i.yg)("p",null,"As a result, you can provide translators with visual context, ensuring more accurate and contextually appropriate translations."))}u.isMDXComponent=!0}}]);